{
  "topic_title": "Policy-Based Routing in VPN",
  "category": "001_Cryptography - 001_Cryptographic Protocols",
  "flashcards": [
    {
      "question_text": "What is the primary function of Policy-Based Routing (PBR) in the context of VPNs?",
      "correct_answer": "To direct network traffic to specific Virtual Private Networks (VPNs) or Virtual Routing and Forwarding (VRF) instances based on defined criteria, rather than solely relying on destination IP addresses.",
      "distractors": [
        {
          "text": "To encrypt all traffic entering the VPN tunnel to ensure confidentiality.",
          "misconception": "Targets [encryption vs routing confusion]: Students who conflate traffic steering with data protection mechanisms."
        },
        {
          "text": "To automatically establish new VPN tunnels when network congestion is detected.",
          "misconception": "Targets [dynamic tunnel establishment vs static policy]: Students who believe PBR dynamically creates tunnels instead of directing traffic through existing ones."
        },
        {
          "text": "To perform deep packet inspection to identify and block malicious payloads within VPN traffic.",
          "misconception": "Targets [PBR vs IDS/IPS confusion]: Students who confuse traffic routing policies with intrusion detection/prevention systems."
        }
      ],
      "detailed_explanation": {
        "core_logic": "PBR steers traffic based on match criteria like source IP or packet length, directing it to specific VRFs or VPNs, because it allows for granular control beyond simple destination-based routing. This functions by using route maps to define policies.",
        "distractor_analysis": "The first distractor incorrectly associates PBR with encryption. The second misrepresents PBR as a dynamic tunnel creation mechanism. The third confuses PBR with security inspection tools like IDS/IPS.",
        "analogy": "Think of PBR as a sophisticated mail sorter in a large company. Instead of just sending mail to the 'Sales Department' based on the address, it can send mail to 'Sales - West Coast' or 'Sales - East Coast' based on the sender's department or the type of document, directing it to the correct internal division (VRF/VPN)."
      },
      "code_snippets": [],
      "difficulty": "intermediate",
      "question_type": "definition",
      "bloom_level": "understand",
      "prerequisites": [
        "VPN_BASICS",
        "ROUTING_BASICS"
      ]
    },
    {
      "question_text": "Which of the following is a key prerequisite for configuring Multi-VRF Selection Using Policy-Based Routing (PBR) on a Cisco device?",
      "correct_answer": "The device must support policy-based routing (PBR), and a Virtual Private Network (VPN) virtual routing and forwarding (VRF) instance must be defined beforehand.",
      "distractors": [
        {
          "text": "The device must have a minimum of 10 Gbps interface speed configured.",
          "misconception": "Targets [hardware requirement vs feature support]: Students who assume specific hardware specs are required rather than feature support."
        },
        {
          "text": "All VPN traffic must be encrypted using AES-256 before PBR can be applied.",
          "misconception": "Targets [PBR vs encryption prerequisite]: Students who believe encryption is a mandatory prerequisite for PBR configuration."
        },
        {
          "text": "A Virtual Private Network (VPN) virtual routing and forwarding (VRF) instance must be defined after PBR is configured.",
          "misconception": "Targets [configuration order]: Students who misunderstand the sequence of configuration steps, believing VRF definition follows PBR."
        }
      ],
      "detailed_explanation": {
        "core_logic": "PBR must be supported by the device, and VRFs must exist before PBR can direct traffic to them, because PBR relies on these underlying components. This functions by enabling the PBR feature and then referencing existing VRF definitions in route maps.",
        "distractor_analysis": "The first distractor suggests a specific hardware speed, which is not a general prerequisite. The second incorrectly mandates encryption. The third reverses the correct configuration order for VRF definition and PBR.",
        "analogy": "Before you can assign specific mail routes (PBR) to different departments (VRFs) in a company, the company must first exist (VRF defined) and have a mailroom system capable of sorting mail based on rules (PBR support)."
      },
      "code_snippets": [],
      "difficulty": "intermediate",
      "question_type": "procedure",
      "bloom_level": "apply",
      "prerequisites": [
        "VRF_BASICS",
        "PBR_BASICS"
      ]
    },
    {
      "question_text": "In Multi-VRF Selection Using Policy-Based Routing, what is the role of a route map?",
      "correct_answer": "To define the match criteria (e.g., source IP, packet length) and the set actions (e.g., set VRF, set next-hop) that dictate how traffic is routed.",
      "distractors": [
        {
          "text": "To encrypt the traffic before it is matched against routing policies.",
          "misconception": "Targets [route map vs encryption function]: Students who confuse the purpose of route maps with cryptographic functions."
        },
        {
          "text": "To automatically discover available VPN tunnels and establish connections.",
          "misconception": "Targets [route map vs tunnel discovery]: Students who believe route maps are used for dynamic tunnel establishment."
        },
        {
          "text": "To perform Quality of Service (QoS) marking on the traffic.",
          "misconception": "Targets [route map vs QoS function]: Students who confuse PBR route maps with QoS policy configurations, although they can sometimes be integrated."
        }
      ],
      "detailed_explanation": {
        "core_logic": "Route maps are central to PBR because they contain the logic for matching traffic and specifying the next hop or VRF, enabling granular control. They function by evaluating traffic against a sequence of permit/deny statements and associated set commands.",
        "distractor_analysis": "The first distractor wrongly assigns an encryption role to route maps. The second mischaracterizes route maps as tunnel discovery tools. The third confuses route maps with QoS marking functions.",
        "analogy": "A route map is like a set of instructions for a traffic controller. It says, 'If the car is red (match criteria), send it to the express lane (set VRF/next-hop). If the car is blue, send it to the local lane.' It dictates the path based on specific conditions."
      },
      "code_snippets": [],
      "difficulty": "intermediate",
      "question_type": "definition",
      "bloom_level": "understand",
      "prerequisites": [
        "PBR_BASICS",
        "ROUTE_MAPS"
      ]
    },
    {
      "question_text": "What is a potential restriction when using Policy-Based Routing (PBR) for VRF selection on certain hardware platforms?",
      "correct_answer": "Some PBR commands, like 'set ip next-hop verify availability', may not be supported due to hardware limitations, as Cisco Discovery Protocol (CDP) information might not be available on line cards.",
      "distractors": [
        {
          "text": "PBR is only supported for IPv4 traffic and cannot be used with IPv6.",
          "misconception": "Targets [protocol support limitation]: Students who assume PBR is limited to IPv4 and not applicable to IPv6."
        },
        {
          "text": "PBR cannot be configured on interfaces that are also participating in MPLS.",
          "misconception": "Targets [MPLS integration conflict]: Students who believe PBR and MPLS are mutually exclusive on the same interface."
        },
        {
          "text": "All PBR configurations require a dedicated hardware ASIC for processing.",
          "misconception": "Targets [hardware resource requirement]: Students who believe PBR always needs specialized hardware, ignoring software-based implementations."
        }
      ],
      "detailed_explanation": {
        "core_logic": "Hardware limitations can restrict PBR functionality because not all software features translate directly to hardware forwarding. This functions by the PBR commands interacting with the device's forwarding plane, which may lack support for certain checks like CDP.",
        "distractor_analysis": "The first distractor incorrectly limits PBR to IPv4. The second wrongly claims PBR and MPLS cannot coexist on an interface. The third makes a generalization about dedicated hardware that isn't universally true.",
        "analogy": "Imagine a high-speed sorting machine (hardware) that can sort packages by destination zip code (basic routing). However, it might not be able to perform a secondary check, like verifying the sender's return address (CDP verification), because its internal sensors aren't designed for that specific task."
      },
      "code_snippets": [],
      "difficulty": "advanced",
      "question_type": "analysis",
      "bloom_level": "analyze",
      "prerequisites": [
        "PBR_BASICS",
        "VRF_BASICS",
        "HARDWARE_ACCELERATION"
      ]
    },
    {
      "question_text": "How does Policy-Based Routing (PBR) enable traffic steering into specific VRF instances?",
      "correct_answer": "By using route map commands with 'set vrf' or 'set ip global next-hop' actions, which take precedence over default routing decisions.",
      "distractors": [
        {
          "text": "By modifying the destination IP address of packets to match the VRF's subnet.",
          "misconception": "Targets [PBR vs NAT/IP modification]: Students who confuse PBR's traffic steering with Network Address Translation (NAT) or IP address manipulation."
        },
        {
          "text": "By dynamically creating new VRF instances based on traffic patterns.",
          "misconception": "Targets [PBR vs dynamic VRF creation]: Students who misunderstand that PBR directs traffic to *existing* VRFs, not creates them."
        },
        {
          "text": "By encrypting the traffic and tagging it with a VRF identifier.",
          "misconception": "Targets [PBR vs encryption/tagging]: Students who associate PBR with encryption or specific tagging mechanisms rather than routing policy."
        }
      ],
      "detailed_explanation": {
        "core_logic": "PBR steers traffic into VRFs because the 'set vrf' command explicitly assigns the packet to a specific VRF context, overriding the global routing table. This functions through route maps that apply these specific 'set' actions to matched traffic.",
        "distractor_analysis": "The first distractor incorrectly suggests PBR modifies destination IPs. The second wrongly claims PBR dynamically creates VRFs. The third confuses PBR with encryption and tagging.",
        "analogy": "Imagine a dispatcher for a fleet of delivery trucks (packets). PBR allows the dispatcher to say, 'Any package for Project X (match criteria) must go on Truck 7 (set VRF), even if Truck 3 normally serves that area.' The dispatcher uses specific instructions ('set vrf') to route the package."
      },
      "code_snippets": [],
      "difficulty": "advanced",
      "question_type": "procedure",
      "bloom_level": "apply",
      "prerequisites": [
        "PBR_BASICS",
        "VRF_BASICS",
        "ROUTE_MAPS"
      ]
    },
    {
      "question_text": "What is the relationship between Policy-Based Routing (PBR) and the global routing table?",
      "correct_answer": "PBR allows traffic to be routed to a specific VRF or next-hop, potentially bypassing or overriding the decisions that would be made by the global routing table.",
      "distractors": [
        {
          "text": "PBR is a component of the global routing table and cannot function independently.",
          "misconception": "Targets [PBR vs global routing table integration]: Students who believe PBR is merely a subset of the global routing table, rather than a policy that can override it."
        },
        {
          "text": "The global routing table always takes precedence over PBR decisions.",
          "misconception": "Targets [precedence of routing decisions]: Students who misunderstand that PBR policies can have higher precedence than standard routing table lookups."
        },
        {
          "text": "PBR is used exclusively for traffic that is not present in the global routing table.",
          "misconception": "Targets [PBR scope vs routing table]: Students who think PBR only applies to routes not found in the main routing table."
        }
      ],
      "detailed_explanation": {
        "core_logic": "PBR overrides the global routing table because it applies specific policies to traffic before a standard routing lookup occurs, allowing for more granular control. This functions by matching traffic and applying 'set' actions that dictate a specific path or VRF.",
        "distractor_analysis": "The first distractor wrongly integrates PBR as a component of the global table. The second incorrectly states the global table always has precedence. The third limits PBR's scope incorrectly.",
        "analogy": "The global routing table is like the main highway system. PBR is like having specific exit ramps or detour signs that can direct certain types of vehicles (traffic) off the main highway onto a different, pre-determined route (VRF or specific next-hop) based on criteria like the vehicle's cargo or origin."
      },
      "code_snippets": [],
      "difficulty": "advanced",
      "question_type": "analysis",
      "bloom_level": "analyze",
      "prerequisites": [
        "PBR_BASICS",
        "ROUTING_TABLES",
        "VRF_BASICS"
      ]
    },
    {
      "question_text": "Which of the following is NOT a typical match criterion used in Policy-Based Routing for VPN traffic?",
      "correct_answer": "Packet's encryption algorithm type.",
      "distractors": [
        {
          "text": "Source IP address.",
          "misconception": "Targets [common match criteria]: Students who incorrectly believe encryption type is a routing match criterion."
        },
        {
          "text": "Destination IP address.",
          "misconception": "Targets [common match criteria]: Students who incorrectly believe encryption type is a routing match criterion."
        },
        {
          "text": "Packet length.",
          "misconception": "Targets [common match criteria]: Students who incorrectly believe encryption type is a routing match criterion."
        }
      ],
      "detailed_explanation": {
        "core_logic": "Packet's encryption algorithm type is not a typical match criterion because PBR operates at Layer 3 (network layer) or Layer 4 (transport layer) for routing decisions, before encryption is typically applied or inspected for routing purposes. Source IP, destination IP, and packet length are common Layer 3/4 attributes used for matching.",
        "distractor_analysis": "The correct answer is the only option that represents a characteristic typically associated with Layer 7 (application layer) or cryptographic functions, not Layer 3/4 routing policies. The other options are standard PBR match criteria.",
        "analogy": "When sorting mail (traffic), you might sort by the sender's address (source IP), the recipient's address (destination IP), or the size of the envelope (packet length). You wouldn't typically sort based on the type of ink used to write the letter (encryption algorithm) because that's not a visible characteristic for sorting purposes at that stage."
      },
      "code_snippets": [],
      "difficulty": "intermediate",
      "question_type": "definition",
      "bloom_level": "understand",
      "prerequisites": [
        "PBR_BASICS",
        "OSI_MODEL"
      ]
    },
    {
      "question_text": "What is the significance of the 'set vrf' command in the context of PBR for VPNs?",
      "correct_answer": "It explicitly directs matched traffic into a specified Virtual Routing and Forwarding (VRF) instance, overriding the default routing table lookup.",
      "distractors": [
        {
          "text": "It encrypts the traffic destined for the specified VRF.",
          "misconception": "Targets [PBR command vs encryption]: Students who confuse routing commands with cryptographic functions."
        },
        {
          "text": "It creates a new VRF instance if one does not already exist.",
          "misconception": "Targets [PBR command vs VRF creation]: Students who misunderstand that 'set vrf' directs to existing VRFs, not creates them."
        },
        {
          "text": "It applies Quality of Service (QoS) policies to traffic entering the VRF.",
          "misconception": "Targets [PBR command vs QoS]: Students who confuse PBR routing commands with QoS policy application."
        }
      ],
      "detailed_explanation": {
        "core_logic": "The 'set vrf' command is crucial because it directly assigns traffic to a specific VRF context, ensuring it follows the routing rules of that VRF, since PBR's goal is granular traffic control. This functions by instructing the router's forwarding plane to use the specified VRF's routing table for subsequent lookups.",
        "distractor_analysis": "The first distractor wrongly associates the command with encryption. The second incorrectly suggests it creates VRFs. The third confuses it with QoS functionality.",
        "analogy": "In a large office building with multiple departments (VRFs), the 'set vrf' command is like a specific signpost at an intersection saying, 'All mail for the Accounting Department (matched traffic) goes down this corridor (VRF).' It directs the flow to the correct internal division."
      },
      "code_snippets": [],
      "difficulty": "intermediate",
      "question_type": "definition",
      "bloom_level": "understand",
      "prerequisites": [
        "VRF_BASICS",
        "PBR_BASICS",
        "ROUTE_MAPS"
      ]
    },
    {
      "question_text": "How can Policy-Based Routing (PBR) be used to implement split tunneling in a VPN scenario?",
      "correct_answer": "By configuring PBR to direct specific traffic (e.g., internal corporate resources) into the VPN tunnel, while allowing other traffic (e.g., general internet browsing) to bypass the tunnel.",
      "distractors": [
        {
          "text": "By encrypting only the traffic that is intended to bypass the VPN tunnel.",
          "misconception": "Targets [split tunneling vs encryption]: Students who confuse the routing decision of split tunneling with encryption."
        },
        {
          "text": "By automatically establishing separate VPN tunnels for different types of traffic.",
          "misconception": "Targets [split tunneling vs dynamic tunnel creation]: Students who believe split tunneling involves creating multiple dynamic tunnels."
        },
        {
          "text": "By forcing all traffic through the VPN tunnel and then decrypting specific internal traffic.",
          "misconception": "Targets [full tunnel vs split tunnel]: Students who confuse split tunneling (selective tunnel) with full tunneling (all traffic tunneled)."
        }
      ],
      "detailed_explanation": {
        "core_logic": "PBR enables split tunneling because it can selectively route traffic, sending sensitive or corporate-bound traffic through the VPN tunnel while allowing less sensitive traffic direct internet access, since the goal is to optimize resource usage and performance. This functions by defining policies that match specific traffic flows and directing them accordingly.",
        "distractor_analysis": "The first distractor wrongly links split tunneling to encryption. The second misrepresents it as dynamic tunnel creation. The third describes a full tunnel scenario, not split tunneling.",
        "analogy": "Split tunneling with PBR is like deciding which mail goes through the secure company mailroom (VPN tunnel) and which goes directly to the general post office (internet). PBR acts as the rule-maker, saying 'Company reports go through the secure room; magazines go directly to the post office.'"
      },
      "code_snippets": [],
      "difficulty": "intermediate",
      "question_type": "scenario",
      "bloom_level": "apply",
      "prerequisites": [
        "VPN_BASICS",
        "PBR_BASICS",
        "SPLIT_TUNNELING"
      ]
    },
    {
      "question_text": "What is the primary security benefit of using Policy-Based Routing (PBR) in conjunction with VPNs?",
      "correct_answer": "Enhanced control over traffic flow, ensuring that only authorized or sensitive traffic enters the VPN tunnel, thereby reducing the attack surface.",
      "distractors": [
        {
          "text": "Guaranteed end-to-end encryption of all traffic, regardless of whether it enters the VPN.",
          "misconception": "Targets [PBR vs universal encryption]: Students who believe PBR itself provides universal encryption."
        },
        {
          "text": "Automatic detection and mitigation of all types of network intrusions.",
          "misconception": "Targets [PBR vs IDS/IPS]: Students who confuse PBR's routing control with intrusion detection and prevention capabilities."
        },
        {
          "text": "Complete anonymity for all users accessing the VPN.",
          "misconception": "Targets [PBR vs anonymity]: Students who believe PBR inherently provides user anonymity."
        }
      ],
      "detailed_explanation": {
        "core_logic": "PBR enhances VPN security by providing granular control over which traffic traverses the VPN, because it allows administrators to enforce policies that minimize exposure. This functions by directing only necessary or sensitive traffic into the encrypted tunnel, leaving other traffic potentially un-tunneled but managed by separate policies.",
        "distractor_analysis": "The first distractor wrongly claims PBR guarantees encryption everywhere. The second confuses PBR with security monitoring systems. The third incorrectly attributes anonymity to PBR.",
        "analogy": "PBR acts like a security checkpoint at the entrance to a secure facility (VPN). It checks IDs and purposes (traffic criteria) and only allows authorized personnel or specific deliveries (sensitive traffic) inside, reducing the risk of unauthorized access (attack surface)."
      },
      "code_snippets": [],
      "difficulty": "intermediate",
      "question_type": "defense",
      "bloom_level": "apply",
      "prerequisites": [
        "VPN_BASICS",
        "PBR_BASICS",
        "SECURITY_PRINCIPLES"
      ]
    },
    {
      "question_text": "Consider a scenario where a company uses PBR to route internal application traffic through a VPN tunnel, but general internet traffic directly to the internet. What is this configuration known as?",
      "correct_answer": "Split tunneling.",
      "distractors": [
        {
          "text": "Full tunneling.",
          "misconception": "Targets [split tunnel vs full tunnel]: Students who confuse selective tunneling with tunneling all traffic."
        },
        {
          "text": "Policy-based encryption.",
          "misconception": "Targets [routing policy vs encryption]: Students who incorrectly associate routing policies with encryption methods."
        },
        {
          "text": "VRF-aware routing.",
          "misconception": "Targets [PBR application vs VRF concept]: Students who mistake the application of PBR for the underlying VRF concept itself."
        }
      ],
      "detailed_explanation": {
        "core_logic": "This configuration is known as split tunneling because PBR is used to selectively route traffic, sending some through the VPN and allowing other traffic to bypass it, since the goal is to optimize access and resource usage. This functions by applying different routing policies based on traffic characteristics.",
        "distractor_analysis": "Full tunneling sends all traffic through the VPN. Policy-based encryption is a misnomer; PBR is about routing, not encryption type. VRF-aware routing describes how VRFs handle routing, but split tunneling is the specific outcome achieved here.",
        "analogy": "This is like having two paths from your house: one goes through a secure, private road (VPN tunnel) for important deliveries, and the other goes directly to the main street (internet) for everyday errands. PBR decides which path each 'delivery' takes."
      },
      "code_snippets": [],
      "difficulty": "foundational",
      "question_type": "scenario",
      "bloom_level": "apply",
      "prerequisites": [
        "VPN_BASICS",
        "PBR_BASICS",
        "SPLIT_TUNNELING"
      ]
    },
    {
      "question_text": "What is the purpose of the 'set ip global next-hop' command when used with PBR in a VPN context?",
      "correct_answer": "To direct matched traffic to a specific next-hop IP address, which could be within a different VRF or a gateway outside the current VRF's routing domain.",
      "distractors": [
        {
          "text": "To encrypt the traffic before forwarding it to the next hop.",
          "misconception": "Targets [PBR command vs encryption]: Students who confuse routing commands with cryptographic functions."
        },
        {
          "text": "To create a new VRF instance that the next hop will belong to.",
          "misconception": "Targets [PBR command vs VRF creation]: Students who misunderstand that the command directs to existing next-hops/VRFs."
        },
        {
          "text": "To ensure the next-hop IP address is reachable via the global routing table only.",
          "misconception": "Targets [PBR command vs routing table scope]: Students who believe PBR commands are restricted to the global routing table."
        }
      ],
      "detailed_explanation": {
        "core_logic": "The 'set ip global next-hop' command is used because it allows PBR to override the default routing table and direct traffic to a specific IP address, which might be in another VRF or a different network segment, since PBR provides policy-based control. This functions by specifying an explicit next-hop IP address in the route map's 'set' action.",
        "distractor_analysis": "The first distractor wrongly associates the command with encryption. The second incorrectly suggests it creates VRFs. The third wrongly restricts its scope to the global routing table.",
        "analogy": "Imagine a dispatcher (PBR) telling a delivery driver (packet) where to go. Instead of just saying 'go to the warehouse' (default route), the dispatcher might say, 'Go to the specific loading dock B at the warehouse' (set ip global next-hop), providing a more precise destination."
      },
      "code_snippets": [],
      "difficulty": "advanced",
      "question_type": "procedure",
      "bloom_level": "apply",
      "prerequisites": [
        "PBR_BASICS",
        "NEXT_HOP_ROUTING",
        "VRF_BASICS"
      ]
    },
    {
      "question_text": "What is a potential drawback of using Policy-Based Routing (PBR) for complex VPN traffic management?",
      "correct_answer": "Increased complexity in configuration and troubleshooting, as policies can become intricate and difficult to manage.",
      "distractors": [
        {
          "text": "Reduced security due to bypassing standard VPN encryption protocols.",
          "misconception": "Targets [PBR vs security reduction]: Students who incorrectly believe PBR inherently reduces security."
        },
        {
          "text": "Significant performance degradation for all network traffic.",
          "misconception": "Targets [PBR vs universal performance impact]: Students who assume PBR always causes major slowdowns."
        },
        {
          "text": "Incompatibility with most modern VPN gateway devices.",
          "misconception": "Targets [PBR vs VPN compatibility]: Students who believe PBR is not compatible with modern VPN infrastructure."
        }
      ],
      "detailed_explanation": {
        "core_logic": "PBR can be complex because it requires careful definition of match criteria and actions, which can lead to intricate configurations that are hard to troubleshoot, since it deviates from standard routing. This functions by creating detailed route maps that must be precisely configured and maintained.",
        "distractor_analysis": "PBR generally enhances security by controlling traffic flow, not reducing it. While PBR can add overhead, significant universal performance degradation is not a guaranteed outcome. PBR is widely supported and compatible with VPNs.",
        "analogy": "Managing PBR for complex VPNs is like trying to create a highly customized set of instructions for every single package moving through a massive distribution center. While it offers precise control, the sheer number of rules and potential exceptions can make it very complicated to manage and debug if something goes wrong."
      },
      "code_snippets": [],
      "difficulty": "advanced",
      "question_type": "analysis",
      "bloom_level": "evaluate",
      "prerequisites": [
        "PBR_BASICS",
        "VPN_BASICS",
        "TROUBLESHOOTING"
      ]
    },
    {
      "question_text": "How does RFC 9256 relate to Policy-Based Routing in the context of Segment Routing (SR)?",
      "correct_answer": "RFC 9256 defines SR Policy, which is a source-routed policy that can steer packet flows, and PBR can be used to steer traffic into these SR Policies.",
      "distractors": [
        {
          "text": "RFC 9256 mandates the use of PBR for all Segment Routing implementations.",
          "misconception": "Targets [RFC mandate vs recommendation]: Students who believe RFCs impose mandatory requirements rather than defining architectures."
        },
        {
          "text": "RFC 9256 describes how PBR can be used to encrypt Segment Routing traffic.",
          "misconception": "Targets [RFC content vs encryption]: Students who confuse routing policy mechanisms with encryption."
        },
        {
          "text": "RFC 9256 replaces the need for Policy-Based Routing in modern networks.",
          "misconception": "Targets [RFC impact vs PBR]: Students who believe new standards completely obsolete older, complementary technologies."
        }
      ],
      "detailed_explanation": {
        "core_logic": "RFC 9256 details SR Policy, which provides a framework for source-routed paths, and PBR can serve as a mechanism to steer traffic into these SR Policies, because PBR allows for policy-driven traffic direction. This functions by PBR policies matching traffic and directing it towards the headend node that instantiates the SR Policy.",
        "distractor_analysis": "RFC 9256 describes SR Policy architecture and steering, not mandates PBR. It focuses on routing, not encryption. SR Policy complements, rather than replaces, mechanisms like PBR for traffic steering.",
        "analogy": "RFC 9256 defines a new type of 'express lane' system (SR Policy) for travel. PBR can be thought of as the 'on-ramp' system that directs specific types of vehicles (traffic) onto the correct express lane based on their destination or type, ensuring they follow the SR Policy."
      },
      "code_snippets": [],
      "difficulty": "expert",
      "question_type": "comparison",
      "bloom_level": "analyze",
      "prerequisites": [
        "PBR_BASICS",
        "SR_BASICS",
        "RFC_9256"
      ]
    },
    {
      "question_text": "When configuring Multi-VRF Selection Using Policy-Based Routing, what is the implication if the 'set vrf' command is configured alongside 'set ip global next-hop'?",
      "correct_answer": "The 'set vrf' command takes precedence, directing traffic to the specified VRF, and subsequent routing decisions are made within that VRF context.",
      "distractors": [
        {
          "text": "The 'set ip global next-hop' command takes precedence, overriding the VRF selection.",
          "misconception": "Targets [command precedence]: Students who misunderstand the hierarchical order of PBR commands."
        },
        {
          "text": "The configuration results in an error, as these commands cannot be used together.",
          "misconception": "Targets [command compatibility]: Students who believe these commands are mutually exclusive."
        },
        {
          "text": "Traffic is encrypted before being routed to the specified VRF or next-hop.",
          "misconception": "Targets [command function vs encryption]: Students who confuse routing commands with encryption."
        }
      ],
      "detailed_explanation": {
        "core_logic": "The 'set vrf' command takes precedence because it establishes the routing context first, which is a more fundamental routing decision than specifying a single next-hop within potentially any context. This functions by the router prioritizing the VRF assignment before evaluating other 'set' commands related to next-hops.",
        "distractor_analysis": "Documentation confirms 'set vrf' and 'set ip global next-hop' have precedence rules, with 'set vrf' typically taking priority. They are not inherently incompatible, and the commands relate to routing, not encryption.",
        "analogy": "Imagine a dispatcher (PBR) assigning a package (traffic). If the dispatcher first says, 'This package goes to the International Division (set vrf),' and then adds, 'Send it via Truck 5 (set ip global next-hop),' the primary instruction is to get it to the International Division first. The specific truck is a detail within that division's operations."
      },
      "code_snippets": [],
      "difficulty": "expert",
      "question_type": "analysis",
      "bloom_level": "analyze",
      "prerequisites": [
        "PBR_BASICS",
        "VRF_BASICS",
        "COMMAND_PRECEDENCE"
      ]
    },
    {
      "question_text": "What is the primary difference between Policy-Based Routing (PBR) and traditional destination-based routing?",
      "correct_answer": "PBR uses multiple criteria (source IP, protocol, packet length) to make routing decisions, whereas traditional routing relies solely on the destination IP address.",
      "distractors": [
        {
          "text": "PBR encrypts traffic, while traditional routing does not.",
          "misconception": "Targets [PBR vs encryption]: Students who confuse routing policies with encryption."
        },
        {
          "text": "Traditional routing is used for VPNs, while PBR is for general internet traffic.",
          "misconception": "Targets [routing scope]: Students who incorrectly assign specific routing types to VPNs vs the internet."
        },
        {
          "text": "PBR only works with IPv6, while traditional routing is for IPv4.",
          "misconception": "Targets [protocol support]: Students who incorrectly associate PBR with a specific IP version."
        }
      ],
      "detailed_explanation": {
        "core_logic": "PBR differs from traditional routing because it allows for more granular control by examining multiple packet attributes beyond just the destination IP, since standard routing can be too simplistic for complex network requirements. This functions by applying policies defined in route maps to matched traffic flows.",
        "distractor_analysis": "PBR is a routing mechanism, not an encryption method. Both PBR and traditional routing can be used for VPNs and general internet traffic, and PBR supports both IPv4 and IPv6.",
        "analogy": "Traditional routing is like a simple address lookup: 'Send this letter to 123 Main St.' PBR is like a mail sorter who looks at the sender, the type of mail, and the address: 'If it's from John Doe (source IP) and it's a bill (protocol), send it to the finance department (specific route/VRF), otherwise send it to the general mailbox (default route).'"
      },
      "code_snippets": [],
      "difficulty": "intermediate",
      "question_type": "comparison",
      "bloom_level": "analyze",
      "prerequisites": [
        "PBR_BASICS",
        "ROUTING_BASICS",
        "VPN_BASICS"
      ]
    }
  ],
  "generation_metadata": {
    "model": "google/gemini-2.5-flash-lite",
    "num_generated": 16,
    "temperature": 0.1,
    "web_citations": [],
    "research_method": "openrouter_web_plugin",
    "search_query": "Policy-Based Routing in VPN 001_Cryptography best practices",
    "latency_ms": 34327.43
  },
  "timestamp": "2026-01-18T16:34:11.387364"
}